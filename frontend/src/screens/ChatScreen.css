@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global variables */
:root {
  --header-height: 64px;
  --input-height: 48px;
  --jump-button-size: 40px;
}

/* ChatScreen-specific styles */
.chat-screen {
  @apply min-h-screen flex flex-col bg-gray-100 dark:bg-gray-900 font-sans;
}

.error-banner {
  @apply fixed top-2 left-1/2 transform -translate-x-1/2 bg-error text-white px-4 py-2 rounded-lg shadow-lg flex justify-between items-center z-[1002] max-w-[calc(100vw-40px)] w-full;
}

.error-banner p {
  @apply m-0 flex-1 text-sm;
}

.error-actions {
  @apply flex items-center gap-2;
}

.dismiss-icon {
  @apply cursor-pointer text-white hover:text-yellow-300 transition-colors;
}

.retry-button {
  @apply bg-success text-white px-3 py-1 rounded hover:bg-green-600 focus:ring-2 focus:ring-green-500 focus:outline-none transition-colors;
}

.chat-header {
  @apply fixed top-0 w-full bg-gradient-to-r from-primary to-blue-600 text-white px-5 py-3 shadow-md z-[1000] flex justify-between items-center h-[var(--header-height)];
}

.dark .chat-header {
  @apply bg-gradient-to-r from-gray-800 to-gray-700;
}

.chat-header h1 {
  @apply text-lg font-semibold;
}

.chat-menu {
  @apply relative;
}

.menu-icon {
  @apply text-xl cursor-pointer hover:text-gray-200;
}

.menu-dropdown {
  @apply fixed right-2 top-[calc(var(--header-height)+0.5rem)] bg-white dark:bg-gray-800 rounded-lg shadow-lg w-72 max-w-[calc(100vw-1rem)] p-2 z-[1001] max-h-[calc(100vh-5rem)] overflow-auto;
}

.menu-item {
  @apply flex items-center px-3 py-2 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-100 transition-colors;
}

.menu-item.logout {
  @apply text-error hover:text-red-600;
}

.menu-item-icon {
  @apply mr-2 text-lg;
}

.menu-add-contact {
  @apply p-2 bg-gray-50 dark:bg-gray-900 rounded-lg mt-2 flex flex-col gap-2;
}

.contact-input-group {
  @apply relative flex items-center;
}

.contact-input {
  @apply w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-100 focus:border-primary focus:ring-1 focus:ring-primary;
}

.contact-input.error {
  @apply border-error animate-shake;
}

.clear-input-icon {
  @apply absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-error cursor-pointer;
}

.error-text {
  @apply text-error text-sm;
}

.contact-button {
  @apply w-full bg-primary text-white py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors;
}

.chat-content {
  @apply flex flex-1 mt-[var(--header-height)] overflow-hidden;
}

.chat-list {
  @apply w-full md:w-1/3 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 overflow-y-auto;
}

.chat-list-skeleton {
  @apply p-2;
}

.skeleton-item {
  @apply h-16 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 animate-pulse;
}

.no-contacts-message {
  @apply flex-1 flex flex-col items-center justify-center text-gray-600 dark:text-gray-400 p-5 text-center;
}

.add-contact-button {
  @apply bg-primary text-white px-4 py-2 rounded mt-2 hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none;
}

.chat-list-item {
  @apply flex items-center p-3 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors;
}

.chat-list-item.selected {
  @apply bg-secondary text-white;
}

.chat-list-avatar {
  @apply w-10 h-10 rounded-full mr-3 object-cover;
}

.chat-list-info {
  @apply flex-1 flex flex-col;
}

.chat-list-header {
  @apply flex justify-between items-center;
}

.chat-list-username {
  @apply font-semibold text-sm;
}

.chat-list-time {
  @apply text-xs text-gray-500 dark:text-gray-400;
}

.chat-list-preview {
  @apply text-sm text-gray-600 dark:text-gray-400 truncate;
}

.chat-list-unread {
  @apply bg-success text-white text-xs rounded-full w-5 h-5 flex items-center justify-center ml-auto;
}

.chat-conversation {
  @apply flex-1 flex flex-col bg-gray-50 dark:bg-gray-900;
}

.conversation-header {
  @apply flex items-center p-3 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10;
}

.back-icon {
  @apply text-lg mr-3 cursor-pointer md:hidden;
}

.conversation-avatar-img {
  @apply w-10 h-10 rounded-full mr-3 object-cover;
}

.conversation-info {
  @apply flex-1;
}

.conversation-info h2 {
  @apply text-base font-semibold;
}

.typing-indicator {
  @apply text-xs text-success;
}

.conversation-messages {
  @apply flex-1 overflow-y-auto p-3;
}

.no-messages {
  @apply flex-1 flex items-center justify-center text-gray-600 dark:text-gray-400;
}

.date-header {
  @apply text-center my-2;
}

.date-header span {
  @apply bg-white dark:bg-gray-800 px-2 py-1 rounded-lg text-xs text-gray-500 dark:text-gray-400;
}

.message-container {
  @apply flex flex-col mb-2;
}

.message {
  @apply max-w-[80%] p-2 rounded-lg mb-1 break-words;
}

.message.mine {
  @apply bg-primary text-white self-end;
}

.message.other {
  @apply bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 self-start;
}

.message-content {
  @apply text-sm;
}

.message-media,
.message-audio {
  @apply max-w-full rounded-lg;
}

.message-document {
  @apply text-primary underline;
}

.message-caption {
  @apply text-sm text-gray-600 dark:text-gray-400 mt-1;
}

.message-meta {
  @apply flex justify-end text-xs text-gray-500 dark:text-gray-400 mt-1;
}

.message-status {
  @apply ml-1;
}

.input-bar {
  @apply flex items-center p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 sticky bottom-0;
}

.emoji-icon,
.attachment-icon,
.send-icon {
  @apply text-lg mx-2 cursor-pointer text-gray-500 hover:text-primary;
}

.emoji-picker {
  @apply absolute bottom-16 left-4 z-10;
}

.message-input {
  @apply flex-1 p-2 border rounded-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:border-primary focus:ring-1 focus:ring-primary;
}

.attachment-picker {
  @apply absolute bottom-16 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-2 flex gap-2;
}

.picker-item {
  @apply text-lg text-gray-500 hover:text-primary cursor-pointer;
}

/* Responsive styles */
@media (max-width: 768px) {
  .chat-list.hidden {
    @apply hidden;
  }

  .chat-conversation.hidden {
    @apply hidden;
  }

  .menu-dropdown {
    @apply w-[calc(100vw-1rem)];
  }
}

@media (max-width: 480px) {
  .chat-header {
    @apply h-12 px-4;
  }

  .chat-header h1 {
    @apply text-base;
  }

  .conversation-header {
    @apply p-2;
  }

  .conversation-messages {
    @apply p-2;
  }

  .input-bar {
    @apply p-2;
  }

  .message {
    @apply text-sm p-2;
  }
}